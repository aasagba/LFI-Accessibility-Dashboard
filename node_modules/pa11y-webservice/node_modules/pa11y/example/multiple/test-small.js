'use strict';

var async = require('async');
var pa11y = require('../..');

// Create a test instance with some default options
var test = pa11y({

	// Log what's happening to the console
	log: {
		debug: console.log.bind(console),
		error: console.error.bind(console),
		info: console.log.bind(console)
	},

	timeout: 10000

});


// Use the async library to run multiple tests in series
// https://github.com/caolan/async
async.parallelLimit([
	function(next) {
		test.run('http://www.nature.com/', function(error) {
			if (error) {
				console.error(error.stack);
			}
			next();
		});
	},
	function(next) {
		test.run('http://www.nature.com/nm/journal/v20/n10/full/nm.3665.html', function(error) {
			if (error) {
				console.error(error.stack);
			}
			next();
		});
	}
], 2, function(error/*, results*/) {
	if (error) {
		return console.error(error.message);
	}
	// console.log(results.home);
	// console.log(results.plants);
});
